const audioCtx = new (window.AudioContext || window['webkitAudioContext'])();
let analyser = audioCtx.createAnalyser();
export const AudioContext = {
    getAudioContext() {
        return audioCtx;
    },
    startAnalyze(stream) {
        const audioCtx = AudioContext.getAudioContext();
        audioCtx.resume().then(() => {
            const analyser = AudioContext.getAnalyser();
            const sourceNode = audioCtx.createMediaStreamSource(stream);
            sourceNode.connect(analyser);
        });
    },
    pauseAnalyze() {
        const audioCtx = AudioContext.getAudioContext();
        void audioCtx.suspend();
    },
    resumeAnalyze() {
        const audioCtx = AudioContext.getAudioContext();
        void audioCtx.resume();
    },
    getAnalyser() {
        return analyser;
    },
    resetAnalyser() {
        analyser = audioCtx.createAnalyser();
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVkaW8tY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1taWMtcmVjb3JkZXIvc3JjL2xpYi91dGlscy9hdWRpby1jb250ZXh0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU1BLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxJQUFJLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUM3RSxJQUFJLFFBQVEsR0FBRyxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUM7QUFFekMsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHO0lBQzFCLGVBQWU7UUFDYixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0lBRUQsWUFBWSxDQUFDLE1BQW1CO1FBQzlCLE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUNoRCxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTtZQUMxQixNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDNUMsTUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLHVCQUF1QixDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzVELFVBQVUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDL0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsWUFBWTtRQUNWLE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUNoRCxLQUFLLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMxQixDQUFDO0lBRUQsYUFBYTtRQUNYLE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUNoRCxLQUFLLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBRUQsV0FBVztRQUNULE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7SUFFRCxhQUFhO1FBQ1gsUUFBUSxHQUFHLFFBQVEsQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUN2QyxDQUFDO0NBQ0YsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImRlY2xhcmUgZ2xvYmFsIHtcclxuICBpbnRlcmZhY2UgV2luZG93IHtcclxuICAgIHdlYmtpdEF1ZGlvQ29udGV4dDogdHlwZW9mIEF1ZGlvQ29udGV4dFxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgYXVkaW9DdHggPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93Wyd3ZWJraXRBdWRpb0NvbnRleHQnXSkoKTtcclxubGV0IGFuYWx5c2VyID0gYXVkaW9DdHguY3JlYXRlQW5hbHlzZXIoKTtcclxuXHJcbmV4cG9ydCBjb25zdCBBdWRpb0NvbnRleHQgPSB7XHJcbiAgZ2V0QXVkaW9Db250ZXh0KCk6IEF1ZGlvQ29udGV4dCB7XHJcbiAgICByZXR1cm4gYXVkaW9DdHg7XHJcbiAgfSxcclxuXHJcbiAgc3RhcnRBbmFseXplKHN0cmVhbTogTWVkaWFTdHJlYW0pOiB2b2lkIHtcclxuICAgIGNvbnN0IGF1ZGlvQ3R4ID0gQXVkaW9Db250ZXh0LmdldEF1ZGlvQ29udGV4dCgpO1xyXG4gICAgYXVkaW9DdHgucmVzdW1lKCkudGhlbigoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGFuYWx5c2VyID0gQXVkaW9Db250ZXh0LmdldEFuYWx5c2VyKCk7XHJcbiAgICAgIGNvbnN0IHNvdXJjZU5vZGUgPSBhdWRpb0N0eC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShzdHJlYW0pO1xyXG4gICAgICBzb3VyY2VOb2RlLmNvbm5lY3QoYW5hbHlzZXIpO1xyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgcGF1c2VBbmFseXplKCk6IHZvaWQge1xyXG4gICAgY29uc3QgYXVkaW9DdHggPSBBdWRpb0NvbnRleHQuZ2V0QXVkaW9Db250ZXh0KCk7XHJcbiAgICB2b2lkIGF1ZGlvQ3R4LnN1c3BlbmQoKTtcclxuICB9LFxyXG5cclxuICByZXN1bWVBbmFseXplKCk6IHZvaWQge1xyXG4gICAgY29uc3QgYXVkaW9DdHggPSBBdWRpb0NvbnRleHQuZ2V0QXVkaW9Db250ZXh0KCk7XHJcbiAgICB2b2lkIGF1ZGlvQ3R4LnJlc3VtZSgpO1xyXG4gIH0sXHJcblxyXG4gIGdldEFuYWx5c2VyKCk6IEFuYWx5c2VyTm9kZSB7XHJcbiAgICByZXR1cm4gYW5hbHlzZXI7XHJcbiAgfSxcclxuXHJcbiAgcmVzZXRBbmFseXNlcigpOiB2b2lkIHtcclxuICAgIGFuYWx5c2VyID0gYXVkaW9DdHguY3JlYXRlQW5hbHlzZXIoKTtcclxuICB9LFxyXG59O1xyXG4iXX0=